<html>
<head>
    <title>Spine Validation Test</title>
    <script type="text/javascript" src="../../scripts/jquery-1.6.2.min.js"></script>
    <script type="text/javascript" src="../../scripts/spine.js"></script>
    <script type="text/javascript" src="../../scripts/spine.databind.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            var ClickCollection = Spine.Model.setup("Click", [ "numberOfClicks" ]);
            
            ClickCollection.extend(DataBind);

            ClickCollection.include({
                registerClick: function() {
                    this.updateAttribute("numberOfClicks", this.numberOfClicks+1);
                },

                hasClickedTooManyTimes: function() {
                    return this.numberOfClicks >= 3;
                },

                updateClicks: function(clicks) {
                    this.updateAttribute("numberOfClicks", clicks)
                }
            });

            var Clicker = ClickCollection.create({ numberOfClicks: 0 });
        })
    </script>
</head>
<body>
    <div id="content">
        <div>You've clicked <span data-bind="text: numberOfClicks">&nbsp;</span> times</div>
 
        <button data-bind="click: registerClick, enable: !hasClickedTooManyTimes()">Click me</button>
 
        <div data-bind="visible: hasClickedTooManyTimes">
            That's too many clicks! Please stop before you wear out your fingers.
            <button data-bind="click: updateClicks(0)">Reset clicks</button>
        </div>
    </div>
</body>
</html>